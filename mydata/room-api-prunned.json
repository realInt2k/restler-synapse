{
    "components": {
        "securitySchemes": {
            "accessTokenBearer": {
                "description": "The `access_token` obtained during [account registration](https://spec.matrix.org/v1.17/client-server-api/#account-registration)\nor [login](https://spec.matrix.org/v1.17/client-server-api/#login), using the `Authorization: Bearer` header.\n\nIt can also be the `as_token` of an application service.\n\nThis is the preferred method.",
                "scheme": "bearer",
                "type": "http"
            },
            "accessTokenQuery": {
                "description": "**Deprecated.** The `access_token` obtained during [account registration](https://spec.matrix.org/v1.17/client-server-api/#account-registration)\nor [login](https://spec.matrix.org/v1.17/client-server-api/#login), as a query parameter.\n\nIt can also be the `as_token` of an application service.",
                "in": "query",
                "name": "access_token",
                "type": "apiKey"
            },
            "appserviceAccessTokenBearer": {
                "description": "The `as_token` of an application service, using the `Authorization: Bearer`\nheader.\n\nThis is the preferred method.",
                "scheme": "bearer",
                "type": "http"
            },
            "appserviceAccessTokenQuery": {
                "description": "**Deprecated.** The `as_token` of an application service, as a query\nparameter.",
                "in": "query",
                "name": "access_token",
                "type": "apiKey"
            }
        }
    },
    "info": {
        "title": "Matrix Client-Server API",
        "version": "v1.17"
    },
    "openapi": "3.1.0",
    "servers": [
        {
            "url": "http://localhost:8008"
        },
        {
            "url": "http://localhost:8008",
            "variables": {
                "homeserver_address": {
                    "default": "localhost:8008",
                    "description": "The base URL for your homeserver"
                }
            }
        }
    ],
    "paths": {
        "/_matrix/client/v3/createRoom": {
            "post": {
                "description": "Create a new room with various configuration options.\n\nThe server MUST apply the normal state resolution rules when creating\nthe new room, including checking power levels for each event. It MUST\napply the events implied by the request in the following order:\n\n1. The `m.room.create` event itself. Must be the first event in the\n   room.\n\n2. An `m.room.member` event for the creator to join the room. This is\n   needed so the remaining events can be sent.\n\n3. A default `m.room.power_levels` event. Overridden by the\n   `power_level_content_override` parameter.\n\n   In [room versions](https://spec.matrix.org/v1.17/rooms) 1 through 11, the room creator (and not\n   other members) will be given permission to send state events.\n\n   In room versions 12 and later, the room creator is given infinite\n   power level and cannot be specified in the `users` field of\n   `m.room.power_levels`, so is not listed explicitly.\n\n   **Note**: For `trusted_private_chat`, the users specified in the\n   `invite` parameter SHOULD also be appended to `additional_creators`\n   by the server, per the `creation_content` parameter.\n\n   If the room's version is 12 or higher, the power level for sending\n   `m.room.tombstone` events MUST explicitly be higher than `state_default`.\n   For example, set to 150 instead of 100.\n\n4. An `m.room.canonical_alias` event if `room_alias_name` is given.\n\n5. Events set by the `preset`. Currently these are the `m.room.join_rules`,\n   `m.room.history_visibility`, and `m.room.guest_access` state events.\n\n6. Events listed in `initial_state`, in the order that they are\n   listed.\n\n7. Events implied by `name` and `topic` (`m.room.name` and `m.room.topic`\n   state events).\n\n8. Invite events implied by `invite` and `invite_3pid` (`m.room.member` with\n   `membership: invite` and `m.room.third_party_invite`).\n\nThe available presets do the following with respect to room state:\n\n| Preset                 | `join_rules` | `history_visibility` | `guest_access` | Other |\n|------------------------|--------------|----------------------|----------------|-------|\n| `private_chat`         | `invite`     | `shared`             | `can_join`     |       |\n| `trusted_private_chat` | `invite`     | `shared`             | `can_join`     | All invitees are given the same power level as the room creator. |\n| `public_chat`          | `public`     | `shared`             | `forbidden`    |       |\n\nThe server will create a `m.room.create` event in the room with the\nrequesting user as the creator, alongside other keys provided in the\n`creation_content` or implied by behaviour of `creation_content`.",
                "operationId": "createRoom",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "example": {
                                    "creation_content": {
                                        "m.federate": false
                                    },
                                    "name": "The Grand Duke Pub",
                                    "preset": "public_chat",
                                    "room_alias_name": "thepub",
                                    "topic": "All about happy hour"
                                },
                                "properties": {
                                    "creation_content": {
                                        "description": "Extra keys, such as `m.federate`, to be added to the content\nof the [`m.room.create`](https://spec.matrix.org/v1.17/client-server-api/#mroomcreate) event.\n\nThe server will overwrite the following\nkeys: `creator`, `room_version`. Future versions of the specification\nmay allow the server to overwrite other keys.\n\nWhen using the `trusted_private_chat` preset, the server SHOULD combine\n`additional_creators` specified here and the `invite` array into the\neventual `m.room.create` event's `additional_creators`, deduplicating\nbetween the two parameters.",
                                        "title": "CreationContent",
                                        "type": "object",
                                        "x-changedInMatrixVersion": {
                                            "1.16": "Added server behaviour for how to handle `trusted_private_chat` and invited users."
                                        },
                                        "properties": {
                                            "m.federate": {
                                                "type": "boolean",
                                                "enum": [false],
                                                "description": "Disables federation. Must be exactly `false`."
                                            }
                                        },
                                            "required": ["m.federate"],
                                            "additionalProperties": false,
                                            "example": {
                                            "m.federate": false
                                        }
                                    },
                                    "name": {
                                        "description": "If this is included, an [`m.room.name`](https://spec.matrix.org/v1.17/client-server-api/#mroomname) event\nwill be sent into the room to indicate the name for the room.\nThis overwrites any [`m.room.name`](https://spec.matrix.org/v1.17/client-server-api/#mroomname)\nevent in `initial_state`.",
                                        "type": "string"
                                    },
                                    "room_alias_name": {
                                        "description": "The desired room alias **local part**. If this is included, a\nroom alias will be created and mapped to the newly created\nroom. The alias will belong on the *same* homeserver which\ncreated the room. For example, if this was set to \"foo\" and\nsent to the homeserver \"example.com\" the complete room alias\nwould be `#foo:example.com`.\n\nThe complete room alias will become the canonical alias for\nthe room and an `m.room.canonical_alias` event will be sent\ninto the room.",
                                        "type": "string"
                                    },
                                    "topic": {
                                        "description": "If this is included, an [`m.room.topic`](https://spec.matrix.org/v1.17/client-server-api/#mroomtopic)\nevent with a `text/plain` mimetype will be sent into the room\nto indicate the topic for the room. This overwrites any\n[`m.room.topic`](https://spec.matrix.org/v1.17/client-server-api/#mroomtopic) event in `initial_state`.",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "description": "The desired room configuration.",
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "examples": {
                                    "response": {
                                        "value": {
                                            "room_id": "!sefiuhWgwghwWgh:example.com"
                                        }
                                    }
                                },
                                "schema": {
                                    "description": "Information about the newly created room.",
                                    "properties": {
                                        "room_id": {
                                            "description": "The created room's ID.",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "room_id"
                                    ],
                                    "type": "object"
                                }
                            }
                        },
                        "description": "Information about the newly created room."
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "description": "A Matrix-level Error",
                                    "properties": {
                                        "errcode": {
                                            "description": "An error code.",
                                            "example": "M_UNKNOWN",
                                            "type": "string"
                                        },
                                        "error": {
                                            "description": "A human-readable error message.",
                                            "example": "An unknown error occurred",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "errcode"
                                    ],
                                    "title": "Error",
                                    "type": "object"
                                }
                            }
                        },
                        "description": "\nThe request is invalid. A meaningful `errcode` and description\nerror text will be returned. Example reasons for rejection include:\n\n- The request body is malformed (`errcode` set to `M_BAD_JSON`\n  or `M_NOT_JSON`).\n\n- The room alias specified is already taken (`errcode` set to\n  `M_ROOM_IN_USE`).\n\n- The initial state implied by the parameters to the request is\n  invalid: for example, the user's `power_level` is set below\n  that necessary to set the room name (`errcode` set to\n  `M_INVALID_ROOM_STATE`).\n\n- The homeserver doesn't support the requested room version, or\n  one or more users being invited to the new room are residents\n  of a homeserver which does not support the requested room version.\n  The `errcode` will be `M_UNSUPPORTED_ROOM_VERSION` in these\n  cases."
                    }
                },
                "security": [
                    {
                        "accessTokenQuery": []
                    },
                    {
                        "accessTokenBearer": []
                    }
                ],
                "summary": "Create a new room",
                "tags": [
                    "Room creation"
                ],
                "x-changedInMatrixVersion": {
                    "1.16": "Added server behaviour for how the initial power levels change depending on room version."
                }
            }
        }
    }
}